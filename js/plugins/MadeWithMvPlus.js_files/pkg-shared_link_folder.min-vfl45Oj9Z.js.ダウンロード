define("modules/clean/ajax_util",["require","exports","modules/clean/window_util"],function(e,r,n){"use strict";function t(e){return new Promise(function(r,t){function i(){return e().then(r)}var o=!1;n.onBeforeUnload(function(){o=!0}),i().catch(function(e){o?n.onPageRestore(function(){i().catch(t)}):t(e)})})}Object.defineProperty(r,"__esModule",{value:!0}),r.requestWithRetry=t}),define("modules/clean/loggers/folder_preview_logger",["require","exports","tslib","modules/clean/ajax","modules/core/browser","modules/constants/request","modules/clean/react/previews/constants","modules/clean/web_timing_logger","modules/clean/uuid"],function(e,r,n,t,i,o,l,a,s){"use strict";function d(e){return n.__assign({},e,{folder_preview_timeline:JSON.stringify(e.folder_preview_timeline),web_timing_data:JSON.stringify(e.web_timing_data)})}function c(e){var r=n.__assign({},e.extra),t=i.performance();if(null!=t){var o=t.timing;o&&o.fetchStart&&(r.time_to_first_byte=o.responseStart-o.fetchStart,r.web_timing_data=o)}var l=a.start_time();l&&r.primary_mark_ts&&(r.time_to_primary_mark=r.primary_mark_ts-l);var s=d(r);return{device_type:e.deviceType,folder_preview_session_id:e.id,folder_ns_id:e.ns_id||0,web_request_id:e.web_request_id,extra:JSON.stringify(s)}}function u(e,r){if(r.extra.source_action===l.PreviewSourceAction.Visit)return t.SilentBackgroundBeaconRequest({url:"/log/folder_preview",data:n.__assign({},c(r),{event_name:e})})}function f(e){var r=void 0===e?{}:e,n=r.id,t=r.ns_id,a=r.deviceType,d=r.web_request_id;return{id:n||s.v4({allowInsecure:!0}),ns_id:t||0,web_request_id:d||o.REQUEST_ID,deviceType:a||i.is_supported_mobile_browser()?_.mobile:i.is_tablet()?_.tablet:_.desktop,extra:{source_action:l.PreviewSourceAction.Visit,folder_preview_timeline:{}}}}function p(e){if(!e.extra.primary_mark_ts){var r=i.now();e.extra.primary_mark_ts=r}}function m(e,r){var n=r.extra,t=n.folder_preview_timeline,o=i.now();switch(e){case h.attempted:if(t.preview_attempted_ts)return;t.preview_attempted_ts=o;break;case h.ended:if(t.preview_session_ended_ts)return;t.preview_session_ended_ts=o;break;case h.renderSucceeded:if(t.render_succeeded_ts)return;t.render_succeeded_ts=o;break;case h.renderFailed:if(t.render_failed_ts)return;t.render_failed_ts=o;break;default:return}return u(e,r)}Object.defineProperty(r,"__esModule",{value:!0});var _;(function(e){e.desktop="desktop",e.mobile="mobile",e.tablet="tablet"})(_=r.DeviceType||(r.DeviceType={}));var h;(function(e){e.attempted="preview_attempted",e.renderSucceeded="render_succeeded",e.renderFailed="render_failed",e.ended="preview_session_ended"})(h=r.EventType||(r.EventType={})),r.createSession=f,r.markPrimaryEvent=p,r.logEvent=m}),define("modules/clean/prefetch/prefetch",["require","exports"],function(e,r){"use strict";function n(e){var r=window[e];if(r)return t(r)}function t(e){return new Promise(function(r,n){var t=e.getDataIfAvailable();t?t.payload?r(JSON.parse(t.payload)):n(t.error):e(function(e){return r(JSON.parse(e))},n)})}Object.defineProperty(r,"__esModule",{value:!0}),r.getPrefetchData=n}),define("modules/clean/react/shared_link_folder/api",["require","exports","modules/clean/ajax_as_promised","modules/clean/ajax_util","modules/clean/prefetch/prefetch"],function(e,r,n,t,i){"use strict";function o(e){return{is_dir:e.is_dir,filename:e.filename,sort_key:e.sort_key,href:e.href,bytes:e.bytes,direct_blockserver_link:e.direct_blockserver_link,ns_id:e.ns_id,preview_type:e.preview_type?e.preview_type:null,preview_url:e.preview_url,sjid:e.sjid,ts:e.ts,thumbnail_url_tmpl:e.thumbnail_url_tmpl,beacon_context:e.beacon_context,file_id:e.file_id,video_container:e.video_container,video_transcode_url:e.video_transcode_url,video_metadata_url:e.video_metadata_url,preview_ssr_image_url_tmpl:e.preview_ssr_image_url_tmpl,preview_ssr_text_url_tmpl:e.preview_ssr_text_url_tmpl,preview_ssr_refresh_url:e.preview_ssr_refresh_url,htmlified_link:e.htmlified_link,linkfile_data:e.linkfile_data,revision_id:e.revision_id,is_symlink:!1}}function l(e){return{_mount_access_perms:e._mount_access_perms,filename:e.filename,href:e.href,is_dir:e.is_dir,ns_id:e.ns_id,open_in_app_data:e.open_in_app_data,shared_folder_id:e.shared_folder_id,sort_key:e.sort_key}}function a(e){return{url:e.url,downloadTestUrl:e.downloadTestUrl,ownerName:e.ownerName,ownerTeamName:e.ownerTeamName,ownerTeamLogo:e.ownerTeamLogo}}function s(e){return{canCopyToDropboxRoles:e.canCopyToDropboxRoles,canDownloadRoles:e.canDownloadRoles,canPrintRoles:e.canPrintRoles,canRemoveLinkUids:e.canRemoveLinkUids,canSyncToDropboxRoles:e.canSyncToDropboxRoles,canViewContextMenuRoles:e.canViewContextMenuRoles,canViewMetadataRoles:e.canViewMetadataRoles}}function d(e){return{displayName:e.displayName,isPackage:e.isPackage,itemId:e.itemId,linkKey:e.linkKey,linkType:e.linkType,secureHash:e.secureHash,subPath:e.subPath}}function c(e){for(var r=[],n=0,t=e.entries;n<t.length;n++){var i=t[n];i.is_dir?r.push(l(i)):r.push(o(i))}return{entries:r,sharedLinkInfos:e.shared_link_infos.map(a),sharePermissions:e.share_permissions.map(s),shareTokens:e.share_tokens.map(d),hasMoreEntries:e.has_more_entries,nextRequestVoucher:e.next_request_voucher,takedownRequestType:e.takedown_request_type}}function u(e,r){return new Promise(function(i){var o={};o.link_key=e.linkKey,o.link_type=e.linkType,o.secure_hash=e.secureHash,o.sub_path=e.subPath,r&&(o.voucher=r),t.requestWithRetry(function(){return n.WebRequest({type:"POST",url:"/list_shared_link_folder_entries",data:o,dataType:"json"})}).then(function(e){i(c(e))})})}function f(){var e=i.getPrefetchData("__REGISTER_SHARED_LINK_FOLDER_PRELOAD_HANDLER");if(e)return e.then(c)}function p(e){return f()||u(e)}function m(e,r){return u(e,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.fetchFirstPage=p,r.fetchNextPage=m}),define("modules/clean/react/shared_link_folder/app",["require","exports","tslib","external/lodash","external/react","external/react-redux","modules/clean/loggers/folder_preview_logger","modules/clean/open_in_app/actions","modules/clean/react/async/loadable","modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/selectors","modules/clean/react/file_viewer/location_utils","modules/clean/react/location/with_location","modules/clean/react/previews/constants","modules/clean/react/shared_link_folder/data/store","modules/clean/react/shared_link_folder/page","modules/clean/viewer","modules/clean/web_timing_logger","modules/clean/web_timing_logger","modules/constants/python","modules/clean/react/shared_link_folder/data/actions","modules/clean/react/shared_link_folder/data/selectors"],function(e,r,n,t,i,o,l,a,s,d,c,u,f,p,m,_,h,v,w,g,y,k,b){"use strict";function E(e,r,t,i){return n.__awaiter(this,void 0,void 0,function(){var e,o,l,a,s,d,c;return n.__generator(this,function(n){switch(n.label){case 0:return r?[4,I()]:[2];case 1:return e=n.sent(),o=e[1],l=[],a=[],s=[],d=0,c=[],Array.isArray(t)&&t.length?t.forEach(function(e,n){e.file.file_id===r.file.file_id&&(d=n),a.push(e.shareToken),s.push(e.sharedLinkInfo),l.push(e.sharePermission),c.push(e.file)}):(c=[r.file],l=[r.sharePermission],a=[r.shareToken],s=[r.sharedLinkInfo]),o.setup(c,d,i,{sharedLinkInfos:s,shareTokens:a,sharePermissions:l}),[2]}})})}function F(e,r){var n,t,i=r.viewingFilename,o={folder:r.folderData,sharedLinkInfo:r.folderSharedLinkInfo,sharePermission:r.folderSharePermission,shareToken:r.folderShareToken,hasMore:!0,fileIds:[],subfolders:[]},l=[],a=[];return i&&!(n=b.getFileByFilename(e)(i))&&(n=r.preview),(t=b.getCurrentFolder(e))?(l=t.fileIds.map(function(r){return b.getFile(e)(r)}),a=t.subfolders.map(function(r){return b.getFolder(e)(r)})):t=o,{appDownloadInterstitialDismissed:u.getAppDownloadInterstitial(e),file:n,folder:t,files:l,subfolders:a}}Object.defineProperty(r,"__esModule",{value:!0});var S=function(){return Promise.all([new Promise(function(r,n){e(["modules/clean/react/file_viewer/collection_viewer"],r,n)}),new Promise(function(r,n){e(["modules/clean/react/file_viewer/actions"],r,n)})])},I=t.memoize(S);r.AsyncFileCollectionViewer=s.Loadable({loader:function(){return I().then(function(e){var r=e[0].FileCollectionViewer;e[1];return r})}});var P=(function(e){function t(r){var n=e.call(this,r)||this;n.onInterstitialClose=function(){n.props.onAppDownloadInterstitialDismissed()},n.onInterstitialContinue=function(){n.props.onAppDownloadInterstitialDismissed()},n.onOpenInAppBannerDimissed=function(){n.setState({openInAppBannerDismissed:!0})};var t=v.Viewer.get_viewer(),i=t.work_user||t.personal_user,o=r.folder;return n.state={pageYOffset:0,user:i,openInAppBannerDismissed:!(o&&o.folder&&o.folder.open_in_app_data),previewSourceAction:m.PreviewSourceAction.Visit},n.folderPreviewSession=r.folderPreviewSession,r.folder&&r.folder.folder&&(n.folderPreviewSession.ns_id=r.folder.folder.ns_id),n}return n.__extends(t,e),t.prototype.componentWillMount=function(){w.log_js_modules_application_code_start();var e=this.props,r=e.openImmediatelyInApp,n=e.folder,t=e.file;if(r)return this.openImmediatelyInApp();this.props.onDataImport(t,n)},t.prototype.componentWillUnmount=function(){this.unsubscribe()},t.prototype.componentWillReceiveProps=function(e){!this.props.viewingFilename&&e.viewingFilename&&this.setState({pageYOffset:window.pageYOffset}),this.props.viewingFilename!==e.viewingFilename&&this.setState({previewSourceAction:m.PreviewSourceAction.Click}),this.folderPreviewSession=e.folderPreviewSession,e.folder&&e.folder.folder&&(this.folderPreviewSession.ns_id=e.folder.folder.ns_id)},t.prototype.componentDidMount=function(){var e=this.props,r=e.viewingFilename,n=e.folder,t=e.file,i=e.files,o=this.state.user;n&&this.props.onFolderLoad(n.folder,n.shareToken),r&&t&&E(r,t,i,o),g.waitForTTI().then(function(){return I()})},t.prototype.componentDidUpdate=function(e,r){var n=this.props,t=n.viewingFilename,i=n.folder,o=n.file,l=n.files,a=this.state.user,s=this.state.pageYOffset;t!==e.viewingFilename&&(t?o&&E(t,o,l,a):window.scrollTo(0,s)),!i||i===e.folder||e.folder&&e.folder.folder.href===i.folder.href||this.props.onFolderLoad(i.folder,i.shareToken)},t.prototype.openImmediatelyInApp=function(){var e=this.props.folder;if(e)try{e.folder.open_in_app_data&&a.openImmediately(e.folder.open_in_app_data)}catch(e){}},t.prototype.shouldShowAppDownloadInterstitial=function(){var e=this.props,r=e.folder,n=e.appDownloadInterstitialDismissed;return d.shouldShowInterstitial()&&r&&r.folder.open_in_app_data&&!n},t.prototype.render=function(){var e=this.props,n=e.accountMenuOptions,t=e.activityContext,o=e.file,l=e.files,a=e.fileViewOrigin,s=e.fileViewTarget,c=e.folder,u=e.onFileClosed,f=e.onFileOpen,p=e.onFolderOpen,_=e.onListModeDisable,v=e.onListModeEnable,w=e.outOfQuota,g=e.shouldForceListMode,k=e.showSyncCoachmark,b=e.subfolders,E=e.viewingFilename,F=this.state,S=F.user,I=F.previewSourceAction,P=F.openInAppBannerDismissed;if(E)return i.createElement(r.AsyncFileCollectionViewer,{activityContext:t,canClose:!0,className:"no-background",file:o.file,files:l.map(function(e){return e.file}),fileViewOrigin:a,fileViewTarget:s,fileViewAction:y.FileViewActionType.CLICK,initialPreviewSourceContext:m.PreviewSourceContext.SharedLinkFolder,initialPreviewSourceAction:I,skipOuterRouting:!0,onCloseViewer:u});if(!c)return null;var T,O=c.shareToken,C=c.sharedLinkInfo,L=c.folder,N=c.sharePermission,M=c.hasMore,A=c.takedownRequestType,x={files:Array.isArray(l)?l.map(function(e){return e.file}):[],folders:Array.isArray(b)?b.map(function(e){return e.folder}):[]};return this.shouldShowAppDownloadInterstitial()&&(T=i.createElement("div",{"aria-label":O.displayName},i.createElement(d.AppDownloadInterstitial,{isFolder:!0,fileOrFolderName:O.displayName,open_in_app_data:L.open_in_app_data,ownerName:C.ownerName,ownerTeamName:C.ownerTeamName,onClose:this.onInterstitialClose,onContinue:this.onInterstitialContinue}))),i.createElement("div",null,i.createElement(h.SharedLinkFolderPage,{accountMenuOptions:n,folderPreviewSession:this.folderPreviewSession,folder:L,folderSharedLinkInfo:C,folderShareToken:O,folderSharePermission:N,hasMore:M,contents:x,user:S,outOfQuota:w,shouldForceListMode:g,showSyncCoachmark:k,showOpenInAppBanner:!P,takedownRequestType:A,onDismissOpenInAppBanner:this.onOpenInAppBannerDimissed,onListModeDisable:_,onListModeEnable:v,onFileOpen:f,onFolderOpen:p}),T)},t.defaultProps={folderPreviewSession:l.createSession()},t})(i.PureComponent);r._SharedLinkFolderApp=P;var T=o.connect(F,{onAppDownloadInterstitialDismissed:c.dismissAppDownloadInterstitial,onFolderLoad:k.loadFolder,onFileClosed:k.closeFile,onDataImport:k.importData,onListModeEnable:k.enableListMode,onListModeDisable:k.disableListMode,onFileOpen:k.openFile,onFolderOpen:k.openFolder})(P),O=p.withLocation(T,function(e){return{viewingFilename:f.getFilenameFromLocation(e),shouldForceListMode:"lst"in e.query}}),C=_.getStoreForSharedLinkFolder(),L=function(e){return i.createElement(o.Provider,{store:C},i.createElement(O,n.__assign({},e)))};r.SharedLinkFolderApp=L}),define("modules/clean/react/shared_link_folder/data/actions",["require","exports","modules/core/uri","modules/core/browser","modules/clean/react/shared_link_folder/utils","modules/core/notify","modules/core/i18n","modules/clean/history","modules/clean/react/shared_link_folder/api"],function(e,r,n,t,i,o,l,a,s){"use strict";function d(e){v("preview",e.filename)}function c(){w("preview")}function u(e){if(i.isNoAccessFolder(e))return void o.Notify.error(l._("Can’t open %(folder_name)s. Ask your admin for access.").format({folder_name:e.filename}));var r=n.URI.parse(e.href);"lst"in a.get_uri().getQuery()&&r.updateQuery({lst:""}),t.redirect(r)}function f(){v("lst","")}function p(){w("lst")}function m(e,r){return{type:g.ImportInitialData,payload:{file:e,folder:r}}}function _(e,r){var n=e.href;return function(e){function t(i){e({type:g.FetchPageSuccess,payload:{parentFolderHref:n,result:i}}),i.hasMoreEntries&&s.fetchNextPage(r,i.nextRequestVoucher).then(t)}e({type:g.InitializeFolder,payload:{href:n}}),s.fetchFirstPage(r).then(t)}}function h(e){a.push_state(e.getPath(),e.getQuery())}function v(e,r){var n={};n[e]=r;var t=a.get_uri();t.updateQuery(n),h(t)}function w(e){var r=a.get_uri();r.removeQuery(e),h(r)}Object.defineProperty(r,"__esModule",{value:!0});var g;(function(e){e.FetchPageSuccess="FetchPageSuccess",e.InitializeFolder="InitializeFolder",e.ImportInitialData="ImportInitialData"})(g=r.Actions||(r.Actions={})),r.openFile=d,r.closeFile=c,r.openFolder=u,r.enableListMode=f,r.disableListMode=p,r.importData=m,r.loadFolder=_}),define("modules/clean/react/shared_link_folder/data/reducer",["require","exports","tslib","modules/clean/react/shared_link_folder/data/actions","modules/core/uri"],function(e,r,n,t,i){"use strict";function o(e){if(!e)return"";var r="";return r="string"==typeof e?i.URI.parse(e).getPath():e.path,r.replace(/\/?(sh|(scl\/fo)|fo)\/|(^\/)/,"")}function l(e){return!e.is_dir}function a(e,r){void 0===e&&(e=s);var i={files:{},folders:{}};switch(r.type){case t.Actions.ImportInitialData:var a=r.payload,d=a.file,c=a.folder;if(d&&(i.files[d.file.file_id]=d),c){var u=o(c.folder.href);i.folders[o(c.folder.href)]=c,i.currentFolderHref=u}return n.__assign({},e,i,{files:n.__assign({},e.files,i.files),folders:n.__assign({},e.folders,i.folders)});case t.Actions.InitializeFolder:var f=o(r.payload.href);return n.__assign({},e,{folders:n.__assign({},e.folders,(S={},S[f]=n.__assign({},e.folders[f]||{},{hasMore:!0,fileIds:[],subfolders:[]}),S))});case t.Actions.FetchPageSuccess:var p=r.payload,m=p.result,_=p.parentFolderHref,h=m.hasMoreEntries,v=m.entries,w=m.sharedLinkInfos,g=m.sharePermissions,y=m.shareTokens,k=m.takedownRequestType,b=o(_),E=e.folders[b]||{fileIds:[],subfolders:[]},F=n.__assign({},E,{fileIds:E.fileIds.slice(),subfolders:E.subfolders.slice(),hasMore:h});return i.folders[b]=F,v.forEach(function(e,r){if(l(e)){var n=e.file_id;i.files[n]={file:e,sharedLinkInfo:w[r],sharePermission:g[r],shareToken:y[r]},F.fileIds.push(n)}else{var t=o(e.href);F.subfolders.push(t),i.folders[t]={fileIds:[],subfolders:[],folder:e,sharedLinkInfo:w[r],sharePermission:g[r],shareToken:y[r]}}}),F.takedownRequestType!==k&&(F.takedownRequestType=k),n.__assign({},e,{files:n.__assign({},e.files,i.files),folders:n.__assign({},e.folders,i.folders)})}return e;var S}Object.defineProperty(r,"__esModule",{value:!0});r.getFolderPath=o;var s={files:{},folders:{}};r.sharedLinkFolderReducer=a}),define("modules/clean/react/shared_link_folder/data/selectors",["require","exports","modules/clean/redux/types"],function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=function(e){return e[n.SHARED_LINK_FOLDER_NAMESPACE_KEY]};r.getFolder=function(e){return function(r){return t(e).folders[r]}},r.getCurrentFolder=function(e){return t(e).folders[t(e).currentFolderHref]},r.getFile=function(e){return function(r){return t(e).files[r]}},r.getFileByFilename=function(e){return function(r){var n=t(e).files;if(r){var i=Object.keys(n).find(function(e){return n[e].file.filename===r});return i?n[i]:void 0}}}}),define("modules/clean/react/shared_link_folder/data/store",["require","exports","modules/clean/redux/store","modules/clean/react/shared_link_folder/data/reducer","modules/clean/react/file_viewer/data/reducer","modules/clean/redux/types"],function(e,r,n,t,i,o){"use strict";function l(){var e=(r={},r[o.SHARED_LINK_FOLDER_NAMESPACE_KEY]=t.sharedLinkFolderReducer,r[o.FILE_VIEWER_NAMESPACE_KEY]=i.fileViewerReducer,r);return n.getStoreAndRegisterReducers(e);var r}Object.defineProperty(r,"__esModule",{value:!0}),r.getStoreForSharedLinkFolder=l}),define("modules/clean/react/shared_link_folder/folder_icon",["require","exports","external/react","modules/clean/react/shared_link_folder/utils","modules/clean/react/icon/icon_helper","modules/clean/react/icon/old_icons"],function(e,r,n,t,i,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SharedLinkFolderFolderIcon=function(e){var r=e.className,i=e.folder,l=e.size;return n.createElement(o.OldFolderIcon,{alt:i.filename,className:r,isConfidential:t.isNoAccessFolder(i),size:l})},r.SharedLinkFolderFolderIcon.defaultProps={size:i.ICON_SIZES.LARGE}}),define("modules/clean/react/shared_link_folder/grid",["require","exports","tslib","external/react","modules/clean/em_string","modules/clean/previews/constants","modules/clean/react/icon/old_icons","modules/clean/react/shared_link_folder/folder_icon","modules/clean/react/shared_link_folder/utils","modules/clean/react/thumbnail","modules/clean/react/title_bubble"],function(e,r,n,t,i,o,l,a,s,d,c){"use strict";function u(e){var r=e.label,n=e.filename,i=t.createElement("span",{className:"sl-grid-filename"},r);return n===r?i:t.createElement(c.TitleBubble,{content:n,position:c.TitleBubble.POSITIONS.BOTTOM},i)}function f(e){var r=e.entry,n=e.onFolderOpen,o=e.onFileOpen,l=i.Emstring.em_snippet(r.filename,16);return r.is_dir?t.createElement(m,{folder:r,label:l,onOpen:n}):t.createElement(p,{file:r,label:l,onOpen:o})}Object.defineProperty(r,"__esModule",{value:!0});r.FileTitle=u,r.SharedLinkFolderGrid=function(e){var r=e.entries,n=e.onFileOpen,i=e.onFolderOpen;return t.createElement("div",{className:"sl-grid"},t.createElement("div",{className:"sl-grid-header clearfix"},t.createElement("div",{className:"sl-grid-header-column sl-grid-header-column--sort"},"Sorted by name")),t.createElement("ol",{className:"sl-grid-body"},r.map(function(e){return t.createElement("li",{className:"sl-grid-cell",key:e.filename},t.createElement(f,{entry:e,onFolderOpen:i,onFileOpen:n}))})))};var p=(function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.handleClick=s.linkClickHandler(function(e){e.preventDefault(),r.props.onOpen(r.props.file)}),r}return n.__extends(r,e),r.prototype.isVideo=function(){return this.props.file.preview_type===o.PreviewType.Video},r.prototype.render=function(){var e=this.props,r=e.file,n=e.label;return t.createElement("a",{href:r.href,onClick:this.handleClick,className:"sl-link sl-link--file"},t.createElement("div",{className:"sl-grid-thumbnail-container"},t.createElement(d.ThumbnailIcon,{alt:r.filename,className:"sl-grid-thumbnail",file:r,iconSize:l.ICON_SIZES.XLARGE}),this.isVideo()?t.createElement("div",{className:"sl-video-watermark"}):null),t.createElement(u,{label:n,filename:r.filename}))},r})(t.PureComponent);r.FileCell=p;var m=(function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.handleClick=s.linkClickHandler(function(e){e.preventDefault(),r.props.onOpen(r.props.folder)}),r}return n.__extends(r,e),r.prototype.render=function(){var e=this.props,r=e.folder,n=e.label;return t.createElement("a",{href:r.href,onClick:this.handleClick,className:"sl-link sl-link--folder"},t.createElement("div",{className:"sl-grid-thumbnail-container"},t.createElement(a.SharedLinkFolderFolderIcon,{className:"sl-grid-thumbnail",folder:r,size:l.ICON_SIZES.XLARGE})),t.createElement(u,{label:n,filename:r.filename}))},r})(t.PureComponent);r.FolderCell=m}),define("modules/clean/react/shared_link_folder/list",["require","exports","external/react","spectrum/table","spectrum/media_table","modules/clean/datetime","modules/clean/em_string","modules/clean/react/shared_link_folder/folder_icon","modules/clean/react/thumbnail","modules/core/i18n","modules/core/uri","modules/clean/react/size_class/constants"],function(e,r,n,t,i,o,l,a,s,d,c,u){"use strict";function f(e){var r=e.entries,i=e.sizeClass,o=e.onFileOpen,l=e.onFolderOpen;return n.createElement(t.Table,{className:"sl-list-container"},n.createElement(t.TableHead,null,n.createElement(t.TableHeadCell,null,d._("Name")),i!==u.SizeClass.Small?n.createElement(t.TableHeadCell,null,d._("Modified",{comment:"label for last modified time"})):null),n.createElement(t.TableBody,null,r.map(function(e){return n.createElement(p,{key:e.filename,entry:e,sizeClass:i,onFileOpen:o,onFolderOpen:l})})))}function p(e){var r=e.entry,t=e.sizeClass,i=e.onFolderOpen,o=e.onFileOpen;return r.is_dir?n.createElement(_,{folder:r,sizeClass:t,onOpen:i}):n.createElement(h,{file:r,sizeClass:t,onOpen:o})}function m(e){function r(e){e.preventDefault(),"function"==typeof c&&c()}var t=e.icon,a=e.lastModified,s=e.name,d=e.sizeClass,c=e.onClick,f=e.href;return n.createElement(i.MediaRow,{className:"sl-list-row"},n.createElement(i.MediaCell,{className:"sl-list-column--filename",icon:t,title:l.Emstring.em_snippet(s,40)},n.createElement("a",{href:f,"aria-label":s,onClick:r})),d!==u.SizeClass.Small?n.createElement(i.MediaCell,{className:"sl-list-column--modified",title:a?o.format_date(a,o.localized_datetime_format):"--"}):null)}function _(e){var r=e.folder,t=e.sizeClass,i=e.onOpen,o=c.URI.parse(r.href).updateQuery({lst:""}),l=o.toString();return n.createElement(m,{icon:n.createElement(a.SharedLinkFolderFolderIcon,{className:"sl-list-icon",folder:r}),href:l,name:r.filename,onClick:function(){return i(r)},sizeClass:t})}function h(e){var r=e.file,t=e.sizeClass,i=e.onOpen;return n.createElement(m,{icon:n.createElement(s.ThumbnailIcon,{alt:r.filename,className:"sl-list-icon",file:r}),lastModified:new Date(1e3*r.ts),name:r.filename,href:r.href,onClick:function(){return i(r)},sizeClass:t})}Object.defineProperty(r,"__esModule",{value:!0});r.SharedLinkFolderList=f}),define("modules/clean/react/shared_link_folder/page",["require","exports","tslib","external/classnames","external/react","modules/clean/analytics","modules/clean/components/loading_indicator","modules/clean/react/browse/sort_helpers","modules/clean/react/css","modules/clean/react/async/loadable","modules/clean/em_string","modules/clean/previews/responsive_utils","modules/clean/react/open_in_app/banner","modules/clean/react/shared_link_folder/folder_icon","modules/clean/react/shared_link_folder/grid","modules/clean/react/shared_link_folder/list","modules/clean/react/shared_link_folder/view_toggle","modules/clean/react/takedown_warning","modules/clean/sharing/constants","modules/clean/web_timing_logger","modules/constants/trademark","modules/core/i18n","modules/core/uri","modules/clean/react/icon/icon_helper","modules/clean/react/size_class/size_class","modules/clean/react/size_class/constants","modules/clean/loggers/folder_preview_logger"],function(e,r,n,t,i,o,l,a,s,d,c,u,f,p,m,_,h,v,w,g,y,k,b,E,F,S,I){"use strict";function P(e,r){return a.compare(e.sort_key,r.sort_key,1)}function T(e,r){return void 0===e&&(e=[]),void 0===r&&(r=[]),r.concat(e).sort(P)}function O(e){return i.createElement("div",{className:"sl-body sl-body--empty-folder"},i.createElement(p.SharedLinkFolderFolderIcon,{className:"sl-empty-folder-icon",folder:e.folder,size:E.ICON_SIZES.XLARGE}),i.createElement("h3",{className:"sl-empty-folder-message"},k._("This folder is empty")))}function C(e){var r=e.files,n=e.folder,t=e.hasMore,o=e.shouldForceListMode,l=e.sizeClass,a=e.subfolders,s=e.onFileOpen,d=e.onFolderOpen,c=T(r,a);return c.length||t?i.createElement("div",{className:"sl-body"},o?[i.createElement(_.SharedLinkFolderList,{key:"list",entries:c,sizeClass:l,onFolderOpen:d,onFileOpen:s}),i.createElement(h.FolderViewToggleOption,{key:"toggler",icon:"grid_light",label:k._("View as grid"),onClick:e.onListModeDisable})]:[i.createElement(m.SharedLinkFolderGrid,{key:"grid",entries:c,onFolderOpen:d,onFileOpen:s}),i.createElement(h.FolderViewToggleOption,{key:"toggler",icon:"list_light",label:k._("View as list"),onClick:e.onListModeEnable})]):i.createElement(O,{folder:n})}function L(e){var r=e.title,n=e.ownerName,t=e.ownerTeamName,o=e.ownerTeamLogo,l=e.sizeClass;return i.createElement("span",null,r,l===S.SizeClass.Small?i.createElement("br",null):null,i.createElement(N,{ownerName:n,ownerTeamName:t,ownerTeamLogo:o}))}function N(e){var r=e.ownerName,n=e.ownerTeamName,t=e.ownerTeamLogo;return n?i.createElement("div",{className:"sl-title-owner"},null!=r?k._("from %(owner)s (%(team)s)").format({owner:r,team:n}):k._("from %(team)s").format({team:n}),null!=t?i.createElement("span",null," ","via ",i.createElement("a",{href:R},y.TRADEMARK_BUSINESS)):null):null}Object.defineProperty(r,"__esModule",{value:!0});var M=d.Loadable({loader:function(){return new Promise(function(r,n){e(["modules/clean/react/shared_link_folder/title_bar"],r,n)}).then(function(e){return e.SharedLinkFolderTitleBar})}}),A=(function(e){function r(r){var n=e.call(this,r)||this;return n.folderPreviewSession=r.folderPreviewSession,n}return n.__extends(r,e),r.prototype.componentWillMount=function(){I.logEvent(I.EventType.attempted,this.folderPreviewSession)},r.prototype.componentWillUnmount=function(){I.logEvent(I.EventType.ended,this.folderPreviewSession)},r.prototype.componentDidMount=function(){this.ensureWebTimingMarked(),this.logSclTiming()},r.prototype.componentDidUpdate=function(){this.ensureWebTimingMarked()},r.prototype.ensureWebTimingMarked=function(){var e=this.props,r=e.contents,n=r.files,t=r.folders,i=e.hasMore;(n.length>0||t.length>0||!i)&&(I.markPrimaryEvent(this.folderPreviewSession),I.logEvent(I.EventType.renderSucceeded,this.folderPreviewSession),g.mark_time_to_view(),g.mark_time_to_interactive())},r.prototype.logSclTiming=function(){if(this.props.user&&this.props.folderShareToken.linkType===w.SharedLinkType.Content){var e=(new Date).getTime(),r={ns_id:this.props.folder.shared_folder_id,timing:e-g.start_time()};o.ShareTibEventLogger.log(this.props.user.id,"PREVIEW_RENDER",w.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,r)}},r.prototype.render=function(){var e=this.props,r=e.accountMenuOptions,n=e.contents,o=e.folder,a=e.folderSharedLinkInfo,s=e.folderSharePermission,d=e.folderShareToken,u=e.hasMore,p=e.outOfQuota,m=e.shouldForceListMode,_=e.showOpenInAppBanner,h=e.showSyncCoachmark,w=e.sizeClass,g=e.takedownRequestType,y=e.user,k=e.onFileOpen,b=e.onFolderOpen,E=i.createElement(L,{sizeClass:w,title:c.Emstring.em_snippet(d.displayName,w!==S.SizeClass.Small?35:20),ownerName:a.ownerName,ownerTeamName:a.ownerTeamName,ownerTeamLogo:a.ownerTeamLogo}),F=t({"sl-page-body":!0,"view-in-app-bar-present":_});return i.createElement("div",{className:"sl-page-container"},i.createElement("div",{className:"sl-page-header"},i.createElement(M,{accountMenuOptions:r,folder:o,outOfQuota:p,sharedLinkInfo:a,shareToken:d,sharePermission:s,showSyncCoachmark:h,sizeClass:w,title:w===S.SizeClass.Small?E:void 0,user:y}),_?i.createElement(f.OpenInAppBanner,{urls:o.open_in_app_data,onClose:this.props.onDismissOpenInAppBanner}):null),i.createElement("div",{className:F},i.createElement("div",{className:"sl-header clearfix"},i.createElement("h3",{className:"sl-title"},null!=g?i.createElement("div",{className:"sl-takedown-warning"},i.createElement(v,{type:g})):null,w!==S.SizeClass.Small?E:null)),i.createElement(C,{files:n.files,folder:o,hasMore:u,shouldForceListMode:m,sizeClass:w,subfolders:n.folders,onListModeDisable:this.props.onListModeDisable,onListModeEnable:this.props.onListModeEnable,onFolderOpen:b,onFileOpen:k}),u?i.createElement("div",{className:"sl-loading-indicator"},i.createElement(l.LoadingIndicator,{style:l.LoadingIndicator.LoadingIndicatorStyle.BLUE_SPINNER})):null))},r.defaultProps={shouldForceListMode:!1},r})(i.PureComponent);r._SharedLinkFolderPage=A;var x=s(A,["/static/css/react_title_bar-vfllDfOqe.css","/static/css/react_file_viewer-vflxeENBt.css"]),D=F.withSizeClass(x,{isResponsiveEnabled:u.isResponsiveEnabled});r.SharedLinkFolderPage=D;var R=new b.URI({scheme:"https",authority:"www.dropbox.com",path:"/business",query:{src:"schmodel"}}).toString()}),define("modules/clean/react/shared_link_folder/utils",["require","exports"],function(e,r){"use strict";function n(e){return function(r){r.ctrlKey||r.metaKey||e(r)}}function t(e){var r=e._mount_access_perms;return null!=r&&!r.includes("can_view")}Object.defineProperty(r,"__esModule",{value:!0}),r.linkClickHandler=n,r.isNoAccessFolder=t}),define("modules/clean/react/shared_link_folder/view_toggle",["require","exports","external/classnames","external/react","modules/clean/react/sprite"],function(e,r,n,t,i){"use strict";function o(e){var r=e.icon,o=e.label,l=e.onClick;return t.createElement("button",{"aria-label":o,className:n({"sl-view-toggle-option":!0}),name:o,onClick:l,value:o},t.createElement(i.Sprite,{group:"web",name:r,alt:o}))}Object.defineProperty(r,"__esModule",{value:!0}),r.FolderViewToggleOption=o}),define("modules/clean/react/takedown_warning",["require","exports","tslib","external/react","external/react-dom-factories","external/prop-types","modules/clean/react_format","modules/constants/python","modules/core/i18n"],function(e,r,n,t,i,o,l,a,s){"use strict";var d=i.a,c=i.div;return(function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r._getWarningMessage=function(){switch(r.props.type){case a.TakedownRequestTypes.DMCA:return l.reactFormat(s._("Certain files in this folder can’t be shared due to a takedown request in accordance with the DMCA. <a>Learn more</a>"),{a:d({target:"_top",href:"/help/210"})});default:return l.reactFormat(s._("Certain files in this folder are unavailable. For more information <a>contact Dropbox support</a>."),{a:d({target:"_top",href:"/ticket"})})}},r}return n.__extends(r,e),r.prototype.render=function(){return c({className:"notify server-success"},this._getWarningMessage())},r.displayName="TakedownWarning",r.propTypes={type:o.number},r})(t.Component)});
//# sourceMappingURL=pkg-shared_link_folder.min.js-vflUo7U_h.map